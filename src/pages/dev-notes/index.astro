---
import { PostList } from "@/components/index";
import { ArticleFrontMatter } from "../../types/general";
import SiteLayout, {
  Props as SiteLayoutProps,
} from "../../layouts/SiteLayout.astro";
import { SITE } from "../../site-config";

let allPosts = await Astro.glob<ArticleFrontMatter>(
  "../../../_data/dev-notes/*.md"
);

allPosts = allPosts.sort((a, b) => {
  if (
    new Date(a.frontmatter.publishedAt) > new Date(b.frontmatter.publishedAt)
  ) {
    return -1;
  } else {
    return 1;
  }
});

const pageMeta: SiteLayoutProps["meta"] = {
  title: "dev-notes",
  locale: "zh-TW",
  description: "This is Summerbud's dev-notes archive",
  image: {
    src: null,
    alt: null,
  },
  publishedAt: null,
  tags: null,
};
---

<SiteLayout
  fullWidth={false}
  meta={pageMeta}
  canonicalURL={`${SITE.domain}/dev-notes`}
  text={null}
>
  <PostList slugPrefix="dev-notes" posts={allPosts} />
</SiteLayout>
